import java.io.*;
import java.net.*;
import java.util.*;
import java.util.concurrent.*;

public class networkScanner{
	private String host;
	private int port;
	private int timeout;
	public networkScanner(String host, int port, int timeout){
		this.host = host;
		this.port = port;
		this.timeout = timeout;
	}
	
	public static ArrayList<scanResult> scan(int port) throws InterruptedException, ExecutionException{
		  final ExecutorService es = Executors.newFixedThreadPool(40);
		  final String baseIp = "192.168.0.";
		  final int timeout = 200;
		  final List<Future<scanResult>> futures = new ArrayList<>();
		  
		  for (int i = 0; i <= 255; i++) {
		    futures.add(portIsOpen(es, (baseIp+i), port, timeout));
		  }
		  es.shutdown();
		  ArrayList<scanResult> results = new ArrayList<scanResult>();
		  for (int i = 0; i < futures.size(); i++){
			  results.add(futures.get(i));
		  }
		  
		 
		}
	
	public static Future<scanResult> portIsOpen(final ExecutorService es, final String ip, final int port, final int timeout) {
		  return es.submit(new Callable<scanResult>() {
		      @Override public scanResult call() {
		        try {
		          Socket socket = new Socket();
		          System.out.print("about to connect to " + ip + " on port " + port);
		          socket.connect(new InetSocketAddress(ip, port), timeout);
		          socket.close();
		          return new scanResult(ip, port, true);
		        } catch (Exception ex) {
		          return new scanResult(ip, port, false);
		        }
		      }
		   });
		}
}